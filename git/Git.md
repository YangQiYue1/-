# Git

## 一、Git概述

Git是一个免费的、开源的分布式版本控制系统，可以快的高效的处理从小型到大型的各种项目。

### 1.1 何为版本控制

版本控制是一种记录文件内容变化，以便将来查阅特定版本修订情况的系统。

版本库控制其实最重要的是可以记录文件修改历史记录，从而可以让用户能够查看历史版本，方便版本切换。

### 1.2 为什么需要版本控制

从个人开发过渡到团队协作。

### 1.3 版本控制工具

- **集中式版本控制工具**

  - 集中式的版本控制系统诸如CVS、SVN等，都有一个单一的集中管理的服务器，保存所有文件的修订版本，而协同工作的人们都通过客户端来连接到这台服务器，取出最新的文件或者提交更新。多年以来这已成为版本控制系统的标准做法。

  - 这种做法带来了许多的好处，每个人都可以在一定程度上看到项目中其他人正在做些什么。而管理员也可以轻松掌控每个开发者的权限，并管理一个集中化的版本控制系统，要远比在各个客户端上维护本地数据库来得轻松容易。
  - 事分两面，有好有坏。这么做显而易见的缺点是中央服务器的单点故障。如果服务器宕机一小时，那么在这一小时内，谁都无法提交更新，也就无法协同工作。

- **分布式版本控制工具**
  - 像Git这种分布式版本控制工具，客户端提取的不是最新版本的文件快照，而是把代码仓库完整的镜像下来（本地库）。这样任何一处协同工作用的文件发生故障，事后都可以用其他客户端的本地仓库进行恢复。因为每个客户端的每一次文件提取操作，实际上都是一次对整个文件仓库的完整备份。
  - 分布式的版本控制系统出现之后，解决的集中式版本控制系统的缺陷：
    - 服务器断网情况下也可以开发（因为版本控制是在本地进行的）
    - 每个客户端保存的也都是整个完整的项目（包含历史记录，更加安全）

### 1.4 Git工作机制

|         区域         |   作用   |
| :------------------: | :------: |
|  工作区（git add）   |  写代码  |
| 暂存区（git commit） | 临时存储 |
|    本地库（push）    |  本地库  |
|        远程库        |          |

### 1.5 Git和代码托管中心

代码托管中心是基于网络服务器的远程代码仓库，一般我们简单成为远程库

- **局域网**
  - GitLab

- **互联网**
  - GitHub（外网）
  - Gitee（国内网站）

## 二、Git安装

官网地址：`https://git-scm.com/`

查看GUN协议，可以直接点击下一步。

<img src="\图片\image-20220320224518699.png" alt="image-20220320224518699" style="zoom:80%;" />

选择Git安装路径（非中文，最好不要有空格）

<img src="\图片\image-20220320224707123.png" alt="image-20220320224707123" style="zoom:80%;" />

Git选项设置，推荐默认设置，然后下一步

<img src="\图片\image-20220320225353409.png" alt="image-20220320225353409" style="zoom:80%;" />

Git安装目录名，不用修改

<img src="\图片\image-20220320225741377.png" alt="image-20220320225741377" style="zoom:80%;" />

选择默认的编辑器，默认不用修改

<img src="\图片\image-20220320225857234.png" alt="image-20220320225857234" style="zoom:80%;" />

对于一个新的库，是否要修改分支的名字

<img src="\图片\image-20220320230005433.png" alt="image-20220320230005433" style="zoom:80%;" />

是否要修改环境变量

<img src="\图片\image-20220320230143377.png" alt="image-20220320230143377" style="zoom:80%;" />

选择后台客户端连接协议，选默认值OpenSSL，然后下一步

<img src="\图片\image-20220320230506666.png" alt="image-20220320230506666" style="zoom:80%;" />

选择默认

<img src="\图片\image-20220320230719217.png" alt="image-20220320230719217" style="zoom:80%;" />

自动选择换行符

<img src="\图片\image-20220320230802897.png" alt="image-20220320230802897" style="zoom:80%;" />

选择终端，默认

<img src="\图片\image-20220320230922137.png" alt="image-20220320230922137" style="zoom:80%;" />

Git拉取合并行为

<img src="\图片\image-20220320231206384.png" alt="image-20220320231206384" style="zoom:80%;" />

选择凭据管理器

<img src="\图片\image-20220320231354032.png" alt="image-20220320231354032" style="zoom:80%;" />

其他设置

<img src="\图片\image-20220320231637409.png" alt="image-20220320231637409" style="zoom:80%;" />

实验室功能，直接安装

<img src="\图片\image-20220320231828760.png" alt="image-20220320231828760" style="zoom:80%;" />

## 三、Git常用命令

| 命令名称                             |      作用      |
| :----------------------------------- | :------------: |
| git config --global user.name 用户名 |  设置用户签名  |
| git config --global user.email 邮箱  |  设置用户签名  |
| git init                             |  初始化本地库  |
| git status                           | 查看本地库状态 |
| git add 文件名                       |  添加到暂存区  |
| git commit -m “日志信息” 文件名      |  提交到本地库  |
| git reflog                           |  查看历史记录  |
| git reset --hard 版本号              |    版本穿梭    |

### 3.1 设置用户签名

- 基本语法
  - git config --global user.name 用户名
  - git config --global user.email 邮箱

<img src="\图片\image-20220320233237567.png" alt="image-20220320233237567" style="zoom:80%;" />

- 说明

  > 签名的作用是为了区分不同操作者身份。用户的签名信息在每一个版本的提交信息中能够看到，以此确认本次提交是谁做的。Giit首次安装必须设置一下用户签名，否则无法提交代码。

- 注意

  > 这里设置用户签名和将来登录GitHub（或其他代码托管中心）的帐号没有任何关系。

### 3.2 初始化本地库

- 基本语法

  `Git init`

  <img src="\图片\image-20220320234253656.png" alt="image-20220320234253656" style="zoom: 67%;" />

- 结果查看

  <img src="\图片\image-20220320234444886.png" alt="image-20220320234444886" style="zoom:80%;" />

> git会创建一个隐藏的.git文件夹

### 3.3 查看本地库状态

- 基本命令

  `git status`

- 新增文件

  <img src="\图片\image-20220320235606647.png" alt="image-20220320235606647" style="zoom:80%;" />

- 查看本地库状态

  <img src="\图片\image-20220320235926278.png" alt="image-20220320235926278" style="zoom:80%;" />

### 3.4 添加暂存区

- 基本语法

  `git add 文件名`

- 将文件添加至暂存区

  <img src="\图片\image-20220327174128646.png" alt="image-20220327174128646" style="zoom:80%;" />

- 查看本地库状态

  <img src="\图片\image-20220327174412708.png" alt="image-20220327174412708" style="zoom:80%;" />

### 3.5 将文件从暂存区删除

- 基本语法

  `git rm --cached 文件名`

- 将文件从暂存区删除

  <img src="\图片\image-20220327174706342.png" alt="image-20220327174706342" style="zoom:80%;" />

- 查看本地库状态

  <img src="\图片\image-20220327174906262.png" alt="image-20220327174906262" style="zoom:80%;" />

### 3.5 提交本地库

> 将暂存区的文件提交到本地库

- 基本语法

  `git commit -m "日志信息" 文件名`

- 将文件提交至本地库

  <img src="\图片\image-20220327181143471.png" alt="image-20220327181143471" style="zoom:80%;" />

- 查看本地库状态

  <img src="\图片\image-20220327181340549.png" alt="image-20220327181340549" style="zoom:80%;" />

### 3.6 修改文件

- 修改文件

  <img src="\图片\image-20220327182034150.png" alt="image-20220327182034150" style="zoom:80%;" />

- 查看本地库状态

  <img src="\图片\image-20220327182203139.png" alt="image-20220327182203139" style="zoom:80%;" />

- 将修改的文件添加至暂存区

  <img src="\图片\image-20220327182440656.png" alt="image-20220327182440656" style="zoom:80%;" />

- 查看本地库状态

  <img src="\图片\image-20220327182543169.png" alt="image-20220327182543169" style="zoom:80%;" />

- 将修改的文件提交至本地库

<img src="\图片\image-20220327182812868.png" alt="image-20220327182812868" style="zoom:80%;" />

- 查看本地库状态

  <img src="\图片\image-20220327183016848.png" alt="image-20220327183016848" style="zoom:80%;" />

### 3.7 查看历史版本

- 基本语法

  `git reflog` 查看版本信息

  `git log` 查看版本详细信息

- 查看版本信息

  <img src="\图片\image-20220327184038075.png" alt="image-20220327184038075" style="zoom:80%;" />

### 3.8 版本穿梭

- 基本语法

  `git reset --hard 版本号`

- 查看版本信息

  <img src="\图片\image-20220327185028472.png" alt="image-20220327185028472" style="zoom:80%;" />

- 版本回退

  <img src="\图片\image-20220327185128821.png" alt="image-20220327185128821" style="zoom:80%;" />

- 查看版本信息

  <img src="\图片\image-20220327185428308.png" alt="image-20220327185428308" style="zoom:80%;" />

  >   可以看到指针已经指向第一个版本

- 查看文件内容

  <img src="\图片\image-20220327185548966.png" alt="image-20220327185548966" style="zoom:80%;" />

  > 内容已变成第一个版本内容

## 四、git分支操作

### 4.1 什么是分支

> 在版本控制过程中，同时推进多个任务，为每个任务，我们就可以创建每个任务的单独分支。使用分支意味着程序员可以把自己的工作从可开发主线上分离开来，开发自己分支的时候，不会影响主线分支的运行。对于初学者而言，分支可以简单理解为副本，一个分支就是一个单独的副本。（分支底层其实也是指针的引用）

### 4.2 分支的好处

> 同时并行推进多个功能开发，提高开发效率。
>
> 各个分支开发过程中如果某一个分支开发失败，不会对其他分支有任何影响。失败的分支删除重新开始即可。

### 4.3 分支的操作

| 命令名称            |             作用             |
| :------------------ | :--------------------------: |
| git branch 分支名   |           创建分支           |
| git branch -v       |           查看分支           |
| git checkout 分支名 |           切换分支           |
| git merge 分支名    | 把指定的分支合并到当前分支上 |

#### 4.3.1 查看分支

- 基本语法

  `git branch -v`

- 查看分支

  <img src="\图片\image-20220328011608259.png" alt="image-20220328011608259" style="zoom:80%;" />

#### 4.3.2 创建分支

- 基本语法

  `git branch 分支名`

- 创建分支

  <img src="\图片\image-20220328011809889.png" alt="image-20220328011809889" style="zoom:80%;" />

- 查看分支

  <img src="\图片\image-20220328011904722.png" alt="image-20220328011904722" style="zoom:80%;" />

#### 4.3.3 切换分支

- 基本语法

  `git checkout 分支名`

- 切换分支

  <img src="\图片\image-20220328012344997.png" alt="image-20220328012344997" style="zoom:80%;" />

- 查看分支

  <img src="\图片\image-20220328012452236.png" alt="image-20220328012452236" style="zoom:80%;" />

- 修改文件

  <img src="\图片\image-20220328012707108.png" alt="image-20220328012707108" style="zoom:80%;" />

- 查看本地库状态

  <img src="\图片\image-20220328012832377.png" alt="image-20220328012832377" style="zoom:80%;" />

- 添加至暂存区

  <img src="\图片\image-20220328012957329.png" alt="image-20220328012957329" style="zoom:80%;" />

- 查看本地库状态

  <img src="\图片\image-20220328013048023.png" alt="image-20220328013048023" style="zoom:80%;" />

- 提交至本地库

  <img src="\图片\image-20220328013249846.png" alt="image-20220328013249846" style="zoom:80%;" />

#### 4.3.4 合并分支

- 基础语法

  `git merge 分支名`

- 切换分支

  <img src="\图片\image-20220328013814488.png" alt="image-20220328013814488" style="zoom:80%;" />

- 查看主分支文件内容

  <img src="\图片\image-20220328013954471.png" alt="image-20220328013954471" style="zoom:80%;" />

- 合并分支

  <img src="\图片\image-20220328014252016.png" alt="image-20220328014252016" style="zoom:80%;" />

- 查看文件

  <img src="\图片\image-20220328014345949.png" alt="image-20220328014345949" style="zoom:80%;" />

#### 4.3.5 产生分支

- 冲突表现

  > 冲突产生的表现：后面状态为`MERGING`

- 冲突产生的原因

  > 合并分支时，两个分支在同一个文件的同一个位置有两套完全不同的修改。Git无法替代我们决定使用哪一个。必须人为规定新代码内容。

- 修改主分支文件内容

  <img src="\图片\image-20220328231402580.png" alt="image-20220328231402580" style="zoom:80%;" />

- 修改热切分支文件内容

  <img src="\图片\image-20220328231509509.png" alt="image-20220328231509509" style="zoom:80%;" />

- 将热切分支合并到主分支

  <img src="\图片\image-20220328231727409.png" alt="image-20220328231727409" style="zoom:80%;" />

- 查看本地库状态

  <img src="\图片\image-20220328232000240.png" alt="image-20220328232000240" style="zoom:80%;" />

- 解决冲突代码

  <img src="\图片\image-20220328232614693.png" alt="image-20220328232614693" style="zoom:80%;" />

  > 如图所见，冲突的代码用三个特殊符号分割开来，<<<<<<<HEAD和=======之间的我们当前分支的代码，在=======和>>>>>>>hot-fix之间是热切分支的代码，我们需要把特殊符号删掉，并调整好我们最重要保留的代码。

- 经过调整之后的文件内容

  <img src="\图片\image-20220328233017820.png" alt="image-20220328233017820" style="zoom:80%;" />

- 将调整后的文件内容添加至暂存区

  <img src="\图片\image-20220328233330665.png" alt="image-20220328233330665" style="zoom:80%;" />

- 执行提交

  **注意**：此时使用git commit命令时不能带文件名

  <img src="\图片\image-20220328233650128.png" alt="image-20220328233650128" style="zoom:80%;" />

## 五、Git团队协作机制

### 5.1 团队内协作

![image-20220328235140047](\图片\image-20220328235140047.png)



### 5.2 跨团队协作

![image-20220328235706799](\图片\image-20220328235706799.png)

## 六、GitHub操作

> ps：全球最大同性交友网站，技术宅男的天堂，新世界的大门。
>
> GitHub网址`https://github.com/`



### 6.1 创建远程库

<img src="\图片\image-20220329001915863.png" alt="image-20220329001915863" style="zoom:80%;" />

**创建完成**

<img src="\图片\image-20220329002034655.png" alt="image-20220329002034655" style="zoom:80%;" />

### 6.2远程仓库操作

| 命令名称                           | 作用                                                     |
| ---------------------------------- | -------------------------------------------------------- |
| git remote -v                      | 查看当前所有远程地址别名                                 |
| git remote add 别名 远程地址       | 起别名                                                   |
| git push 别名 分支                 | 推送本地分支上的内容到远程仓库                           |
| git clone 远程地址                 | 将远程仓库的内容克隆到本地                               |
| git pull 远程库地址别名 远程分支名 | 将远程仓库对于分支最新内容拉下来后与当前本地分支直接合并 |

#### 6.2.1 创建远程仓库别名

- 基本语法

  `git remote -v` 查看当前所有远程地址别名

  `git remote add 别名 远程地址` 

- 实际操作

  <img src="\图片\image-20220329003341288.png" alt="image-20220329003341288" style="zoom:80%;" />

#### 6.2.2 推送本地分支到远程仓库

- 基本语法

  `git push 别名 分支`

- 实际操作

  <img src="\图片\image-20220329005301317.png" alt="image-20220329005301317" style="zoom:80%;" />

- 刷新GitHub

  <img src="\图片\image-20220329005336052.png" alt="image-20220329005336052" style="zoom:80%;" />

#### 6.2.3 拉取远程分支到本地分支

- 基本语法

  `git pull 别名 分支`

- 修改远程分支代码

  <img src="\图片\image-20220402002845058.png" alt="image-20220402002845058" style="zoom:80%;" />

- 提交远程分支代码

  <img src="\图片\image-20220402003013375.png" alt="image-20220402003013375" style="zoom:80%;" />

- 拉取远程分支代码

  <img src="\图片\image-20220402004052108.png" alt="image-20220402004052108" style="zoom:80%;" />

- 查看本地库状态

  <img src="\图片\image-20220402004259131.png" alt="image-20220402004259131" style="zoom:80%;" />

- 查看文件内容

  <img src="\图片\image-20220402004411504.png" alt="image-20220402004411504" style="zoom:80%;" />

#### 6.3.4 克隆远程库到本地

- 基本语法

  `git clone 远程地址`

- 克隆远程库到本地

  <img src="\图片\image-20220403163814129.png" alt="image-20220403163814129" style="zoom:80%;" />

- 查看本地文件

  <img src="\图片\image-20220403163938683.png" alt="image-20220403163938683" style="zoom:80%;" />

- 查看别名

  <img src="\图片\image-20220403164732370.png" alt="image-20220403164732370" style="zoom:80%;" />

- 小结

  **克隆会做如下事情**

  > - 拉取代码
  > - 初始化本地库
  > - 创建别名

